<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FitMap - Find Gyms</title>
    <link rel="stylesheet" href="./style.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: #f5f5f5;
        }

        #map-location-section {
            width: 100%;
            height: 100vh;
            display: flex;
            flex-direction: column;
            background: white;
        }

        .search-header {
            padding: 20px;
            background: white;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            z-index: 100;
        }

        .search-box {
            display: flex;
            align-items: center;
            gap: 15px;
            background: #f0f0f0;
            padding: 12px 16px;
            border-radius: 25px;
        }

        .search-icon {
            width: 24px;
            height: 24px;
            color: #666;
        }

        .search-box input {
            flex: 1;
            border: none;
            background: transparent;
            font-size: 16px;
            outline: none;
            color: #333;
        }

        .close-btn {
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            cursor: pointer;
            color: #666;
        }

        .section-title {
            padding: 20px;
            font-size: 24px;
            font-weight: bold;
            color: #333;
        }

        .map-container {
            flex: 1;
            position: relative;
            background: #e8d5f0;
            overflow: hidden;
        }

        .map-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .map-placeholder {
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #e8d5f0 0%, #d4e4f7 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }

        .map-placeholder::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: 
                linear-gradient(rgba(100, 100, 255, 0.1) 1px, transparent 1px),
                linear-gradient(90deg, rgba(100, 100, 255, 0.1) 1px, transparent 1px);
            background-size: 50px 50px;
        }

        .map-text {
            font-size: 18px;
            color: #666;
            text-align: center;
            z-index: 1;
        }

        .gym-markers {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }

        .gym-marker {
            position: absolute;
            width: 40px;
            height: 40px;
            background: #7c3aed;
            border-radius: 50% 50% 50% 0;
            transform: rotate(-45deg);
            cursor: pointer;
            transition: transform 0.3s;
            box-shadow: 0 3px 10px rgba(124, 58, 237, 0.4);
        }

        .gym-marker:hover {
            transform: rotate(-45deg) scale(1.2);
        }

        .gym-marker::before {
            content: 'üèãÔ∏è';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) rotate(45deg);
            font-size: 18px;
        }

        .featured-gyms {
            background: white;
            padding: 20px;
            max-height: 40vh;
            overflow-y: auto;
        }

        .featured-title {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 15px;
            color: #333;
        }

        .gym-item {
            display: flex;
            gap: 15px;
            padding: 15px;
            background: #f8f8f8;
            border-radius: 12px;
            margin-bottom: 12px;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .gym-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .gym-thumbnail {
            width: 80px;
            height: 80px;
            border-radius: 8px;
            background: #ddd;
            object-fit: cover;
        }

        .gym-details {
            flex: 1;
        }

        .gym-title {
            font-size: 16px;
            font-weight: bold;
            color: #333;
            margin-bottom: 4px;
        }

        .gym-location {
            font-size: 13px;
            color: #666;
            margin-bottom: 4px;
        }

        .gym-description {
            font-size: 12px;
            color: #999;
        }

        .bottom-nav {
            display: flex;
            justify-content: space-around;
            align-items: center;
            padding: 15px 20px;
            background: #7c3aed;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
        }

        .nav-item {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 50px;
            height: 50px;
            border-radius: 12px;
            cursor: pointer;
            transition: background 0.3s;
        }

        .nav-item.active {
            background: rgba(255, 255, 255, 0.2);
        }

        .nav-item img {
            width: 28px;
            height: 28px;
            filter: brightness(0) invert(1);
        }

        .nav-item a {
            display: flex;
            align-items: center;
            justify-content: center;
        }
    </style>
</head>
<body>
    <div id="map-location-section">
        <div class="search-header">
            <div class="search-box">
                <svg class="search-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <circle cx="11" cy="11" r="8"></circle>
                    <path d="m21 21-4.35-4.35"></path>
                </svg>
                <input 
                    type="text" 
                    id="locationSearch" 
                    placeholder="Woji, Port Harcourt"
                    onkeyup="handleLocationSearch(event)"
                >
                <div class="close-btn" onclick="goBack()">‚úï</div>
            </div>
        </div>

        <div class="section-title">Find a Gym Centre on the Map</div>

        <div class="map-container">
            <div class="map-placeholder">
                <div class="map-text">üìç Interactive Map View<br>Loading gym locations...</div>
                <div class="gym-markers" id="gymMarkers"></div>
            </div>
        </div>

        <div class="featured-gyms">
            <div class="featured-title">Featured Gym Centres</div>
            <div id="featuredGymsList"></div>
        </div>

        <div class="bottom-nav">
            <div class="nav-item" data-page="home" onclick="navigateTo('home', event)">
                <a href="./fit-map home dashboard.html">
                    <img src="./Resources/Resource Icons/icons8-home-50.png" alt="home-icon">
                </a>
            </div>
            <div class="nav-item" data-page="explore" onclick="navigateTo('explore', event)">
                <a href="./fit-map nearby gyms.html">
                    <img src="./Resources/Resource Icons/icons8-four-squares-50.png" alt="explore-icon">
                </a>
            </div>
            <div class="nav-item active" data-page="location" onclick="navigateTo('location', event)">
                <a href="./fit-map map location.html">
                    <img src="./Resources/Resource Icons/icons8-location-target-50.png" alt="location-icon">
                </a>
            </div>
            <div class="nav-item" data-page="profile" onclick="navigateTo('profile', event)">
                <a href="./fit-map user profile.html">
                    <img src="./Resources/Resource Icons/icons8-profile-50.png" alt="profile-icon">
                </a>
            </div>
        </div>
    </div>

    <script>
        // Gym data with locations
        const gymsWithLocations = [
            {
                id: 1,
                name: 'Sky Fitness Gym',
                location: 'Woji, Port Harcourt',
                distance: '1.4 km',
                description: 'Good environment and nice equipment',
                image: './Resources/Resource Images/1757765151611.Screenshot_20250913-113051.jpg',
                mapPosition: { top: '30%', left: '60%' }
            },
            {
                id: 2,
                name: 'Pawa Fitness Centre',
                location: '2nd Artillery, Port Harcourt',
                distance: '7.3 km',
                description: 'Large aerobic space indoor, and a complete',
                image: './Resources/Resource Images/1757765218549.1757765192791.Screenshot_20250913-113042.jpg',
                mapPosition: { top: '70%', left: '40%' }
            },
            {
                id: 3,
                name: 'GoWellness Resort',
                location: 'Rumuogba, Port Harcourt',
                distance: '4.3 km',
                description: 'Large aerobic space indoor, and a complete fitness center',
                image: './Resources/Resource Images/1757765497532.Screenshot_20250913-113008.jpg',
                mapPosition: { top: '45%', left: '35%' }
            },
            {
                id: 4,
                name: 'Gardenia\'s Gymnasium',
                location: 'Elelenwo, Port Harcourt',
                distance: '5.9 km',
                description: 'Captivating aerobic space indoor',
                image: './Resources/Resource Images/1757765113098.Screenshot_20250913-113107.jpg',
                mapPosition: { top: '25%', left: '75%' }
            }
        ];

        let currentSearchLocation = 'Woji, Port Harcourt';

       

            // Load saved location
            const savedLocation = localStorage.getItem('userLocation') || 'Woji, Port Harcourt';
            currentSearchLocation = savedLocation;
            document.getElementById('locationSearch').value = savedLocation;

            // Initialize map
            loadMapMarkers();
            loadFeaturedGyms();
            
            // Set active nav item
            setActiveNavItem('location');
        });

        function loadMapMarkers() {
            const markersContainer = document.getElementById('gymMarkers');
            markersContainer.innerHTML = '';

            gymsWithLocations.forEach(gym => {
                const marker = document.createElement('div');
                marker.className = 'gym-marker';
                marker.style.top = gym.mapPosition.top;
                marker.style.left = gym.mapPosition.left;
                marker.onclick = () => showGymOnMap(gym);
                marker.title = gym.name;
                
                markersContainer.appendChild(marker);
            });
        }

        function showGymOnMap(gym) {
            const details = `
üìç ${gym.name}

Location: ${gym.location}
Distance: ${gym.distance}

${gym.description}

Would you like to get directions?
            `;
            
            if (confirm(details)) {
                showToast(`Getting directions to ${gym.name}...`);
                // In real app, open Google Maps with gym location
            }
        }

        function loadFeaturedGyms() {
            const gymsList = document.getElementById('featuredGymsList');
            gymsList.innerHTML = '';

            // Filter gyms based on search location
            const filteredGyms = filterGymsByLocation(currentSearchLocation);

            if (filteredGyms.length === 0) {
                gymsList.innerHTML = `
                    <div style="text-align: center; padding: 20px; color: #999;">
                        No gyms found in this location
                    </div>
                `;
                return;
            }

            filteredGyms.forEach(gym => {
                const gymItem = document.createElement('div');
                gymItem.className = 'gym-item';
                gymItem.onclick = () => selectGym(gym);
                
                gymItem.innerHTML = `
                    <img src="${gym.image}" alt="${gym.name}" class="gym-thumbnail">
                    <div class="gym-details">
                        <div class="gym-title">${gym.name}</div>
                        <div class="gym-location">${gym.location} ¬∑ ${gym.distance}</div>
                        <div class="gym-description">${gym.description}</div>
                    </div>
                `;
                
                gymsList.appendChild(gymItem);
            });
        }

        function filterGymsByLocation(searchLocation) {
            if (!searchLocation || searchLocation.trim() === '') {
                return gymsWithLocations;
            }

            const searchTerm = searchLocation.toLowerCase().trim();
            
            return gymsWithLocations.filter(gym => 
                gym.location.toLowerCase().includes(searchTerm) ||
                gym.name.toLowerCase().includes(searchTerm)
            );
        }

        function handleLocationSearch(event) {
            const searchValue = event.target.value;
            currentSearchLocation = searchValue;

            if (event.key === 'Enter') {
                // Update location
                localStorage.setItem('userLocation', searchValue);
                showToast(`Location updated to ${searchValue}`);
            }

            // Real-time filter gyms as user types
            loadFeaturedGyms();
        }

        function selectGym(gym) {
            localStorage.setItem('selectedGym', JSON.stringify(gym));
            
            const choice = confirm(`${gym.name}\n${gym.location}\n\n${gym.description}\n\nView more details?`);
            
            if (choice) {
                showToast('Opening gym details...');
                // You can create a gym details page later
            }
        }

        function goBack() {
            window.location.href = './fit-map home dashboard.html';
        }

        function navigateTo(section, event) {
            if (event) {
                event.preventDefault();
            }
            
            setActiveNavItem(section);
            
            switch(section) {
                case 'home':
                    window.location.href = './fit-map home dashboard.html';
                    break;
                case 'explore':
                    window.location.href = './fit-map nearby gyms.html';
                    break;
                case 'location':
                    // Already on location page
                    break;
                case 'profile':
                    window.location.href = './fit-map user profile.html';
                    break;
            }
        }

        function setActiveNavItem(page) {
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            
            const activeItem = document.querySelector(`[data-page="${page}"]`);
            if (activeItem) {
                activeItem.classList.add('active');
            }
        }

        function showToast(message) {
            const existingToast = document.querySelector('.toast-message');
            if (existingToast) {
                existingToast.remove();
            }
            
            const toast = document.createElement('div');
            toast.className = 'toast-message';
            toast.style.cssText = `
                position: fixed;
                bottom: 100px;
                left: 50%;
                transform: translateX(-50%);
                background-color: rgba(0, 0, 0, 0.8);
                color: white;
                padding: 12px 24px;
                border-radius: 25px;
                font-size: 14px;
                z-index: 9999;
                animation: slideUp 0.3s ease-out;
            `;
            toast.textContent = message;
            
            document.body.appendChild(toast);
            
            setTimeout(() => {
                toast.style.animation = 'slideDown 0.3s ease-out';
                setTimeout(() => toast.remove(), 300);
            }, 3000);
        }

        // Add CSS animation
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideUp {
                from {
                    bottom: 50px;
                    opacity: 0;
                }
                to {
                    bottom: 100px;
                    opacity: 1;
                }
            }
            
            @keyframes slideDown {
                from {
                    bottom: 100px;
                    opacity: 1;
                }
                to {
                    bottom: 50px;
                    opacity: 0;
                }
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>
